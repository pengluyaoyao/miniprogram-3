<!--我的页面-->
<view class="profile-container">
  <!-- 用户信息区域 -->
  <view class="user-header">
    <view class="user-info">
      <view class="avatar-wrapper">
        <t-avatar
          src="{{userInfo.avatar}}"
          size="160rpx"
          class="user-avatar"
          bind:tap="onAvatarTap"
        />
        <view class="edit-avatar-btn" bind:tap="onEditProfileTap">
          <t-icon name="edit" size="24rpx" color="#ffffff" />
        </view>
      </view>
      <view class="user-details">
        <view class="username">{{userInfo.nickname}}</view>
      </view>
    </view>
  </view>

  <!-- 我的内容 -->
  <view class="content-section">
    <view class="section-title">我的内容</view>
    <t-cell-group>
      <t-cell
        title="分析记录"
        left-icon="edit"
        arrow
        bind:tap="onAnalysisHistoryTap"
      >
        <view slot="right-icon">
          <text class="count-badge">{{userInfo.stats.analysis}}</text>
        </view>
      </t-cell>
    </t-cell-group>
  </view>

  <!-- 设置 -->
  <view class="settings-section">
    <view class="section-title">设置</view>
    <t-cell-group>
      <t-cell
        title="账户设置"
        left-icon="setting"
        arrow
        bind:tap="onAccountSettingsTap"
      />
      
      <t-cell
        title="隐私设置"
        left-icon="lock-on"
        arrow
        bind:tap="onPrivacySettingsTap"
      />
      
      <t-cell
        title="关于我们"
        left-icon="help-circle"
        arrow
        bind:tap="onAboutTap"
      />
    </t-cell-group>
  </view>

  <!-- 退出登录 -->
  <view class="logout-section" wx:if="{{isLoggedIn}}">
    <t-button
      theme="danger"
      size="large"
      block
      bind:tap="onLogoutTap"
    >
      退出登录
    </t-button>
  </view>

  <!-- 未登录状态 -->
  <view class="login-section" wx:if="{{!isLoggedIn}}">
    <view class="login-prompt">
      <t-icon name="user" size="120rpx" color="#ccc" />
      <text class="login-text">请先登录</text>
      <text class="login-desc">登录后可查看个人内容和设置</text>
    </view>
    <t-button
      theme="primary"
      size="large"
      block
      bind:tap="onLoginTap"
      style="margin-top: 40rpx;"
    >
      立即登录
    </t-button>
  </view>
</view>

<!-- Toast提示 -->
<t-toast id="t-toast" />
